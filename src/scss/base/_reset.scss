@use "../utils/variables" as *;

*:where(*, *::before, *::after) {
  box-sizing: border-box;
}

html,
body {
  min-height: 100%;
  scroll-behavior: smooth;
}

body {
  margin: 0;
  font-family: $font-sans;
  background: var(--bg);
  color: var(--fg);
  -webkit-font-smoothing: antialiased;
}

:root {
  /* Default light theme (fallback) */
  --bg: #{$bg};
  --fg: #{$fg};
  --muted: #{$muted};
  --primary: #{$primary};
  --secondary: #{$secondary};
  --border: #{$border};
  --surface: #{$surface};
  --light-gray: #{$light-gray};
  --dark-gray: #{$dark-gray};
  --yellow-sun: #{$yellow-sun};
  --lightbox-dialog-bg: #{$lightbox-dialog-bg};
  --lightbox-header-bg: #{$lightbox-header-bg};
}

/* OS setting */
@media (prefers-color-scheme: dark) {
  :root {
    --bg: #{$bg-dark};
    --fg: #{$fg-dark};
    --muted: #{$muted-dark};
    --primary: #{$primary};
    --border: #{$border-dark};
    --surface: #{$surface-dark};
    --light-gray: #{$light-gray-dark};
    --dark-gray: #{$dark-gray-dark};
  }
}

/* Explicit user choice overrides */
:root[data-theme="light"] {
  --bg: #{$bg};
  --fg: #{$fg};
  --muted: #{$muted};
  --primary: #{$primary};
  --secondary: #{$secondary};
  --border: #{$border};
  --surface: #{$surface};
  --light-gray: #{$light-gray};
  --dark-gray: #{$dark-gray};
  --yellow-sun: #{$yellow-sun};
  --lightbox-dialog-bg: #{$lightbox-dialog-bg};
  --lightbox-header-bg: #{$lightbox-header-bg};
}

:root[data-theme="dark"] {
  --bg: #{$bg-dark};
  --fg: #{$fg-dark};
  --muted: #{$muted-dark};
  --primary: #{$primary};
  --border: #{$border-dark};
  --surface: #{$surface-dark};
  --light-gray: #{$light-gray-dark};
  --dark-gray: #{$dark-gray-dark};
}
